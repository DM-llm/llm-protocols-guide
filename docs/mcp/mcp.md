# MCP（模型上下文协议）

## 前言

大家好欢迎来到本篇教程，在本篇教程，我们将带领大家用浅显易懂的方式初步了解MCP。

## 一、MCP的概念

首先，为什么会有MCP呢？MCP是什么呢？

在了解MCP前，我们要先了解一下大模型本来的能力是怎么样的呢？以及现在我们去用大模型去解决问题时会遇到的困难。

### 1、大模型本来的能力是怎么样的呢？

大模型（比如ChatGPT，Deepseek）虽然很聪明，但它有天生的"短板"：

- 它不知道最新的天气、新闻、快递信息等实时数据。
- 它不会真的帮你订票、转账、下单，只会"嘴上说说"。
- 你需要它帮你做事时，它其实啥也做不了，只能陪你聊聊天。

所以，我们去用大模型去解决问题时，我们希望大模型不仅能说，还能"动手"帮我们干活。

那么大模型是怎么"动手"帮我们干活呢？解决的办法就是去用工具。

### 2、让大模型调用工具的方法有哪些？

为了解决还能"动手"帮我们干活这个问题，业界尝试了多种办法：

**Function Calling（函数调用）**
让AI像"秘书"一样，自动找对的"工具"帮你办事。但各个AI平台都有自己的实现方式。

**MCP（大模型上下文协议）**
提供了一个统一的"充电接口"标准，让所有AI平台都能用同一套工具调用协议，就像USB-C接口一样通用。

下面我们重点讲讲Function Calling，以及Function Calling是怎么让大模型用工具的？

### 3、什么是Function Calling？

Function Calling（函数调用）是大模型与外部工具或服务交互的一种机制。它让大模型能够像程序员调用函数一样，自动调用各种预先定义好的"功能"，实现获取数据、计算、查询等更复杂的任务。

更通俗的理解就是找到了一个外面的帮手。同样我们再了解一下Function Calling概念诞生背景。

#### 3.1 Function Calling概念诞生背景

最初，AI只能陪你聊天，不能查实时数据、不能下单。

于是，大家就想：能不能让AI把"不会做的事"交给专门的工具来做？

比如查天气，就让AI自动找"查天气工具"帮你查。

#### 3.2 Function Calling生活化例子

如果还不是很能理解，我们再以查天气的例子来说明一下：

**你：** 帮我查一下明天北京的天气。

- **以前的AI：** 只能"编"一个天气给你，因为它不会真的查。

- **有了Function Calling后：**
a. AI明白你要查天气。
b. AI自动找到"查天气工具"，把"北京、明天"这些信息传过去。
c. 工具查好后，把结果（比如"晴，28度"）返回给AI。
d. AI再把查到的结果告诉你。

但Function Calling也有它的优缺点~让我们接着说明。

#### 3.3 Function Calling优缺点分析

##### 3.3.1 Function Calling优点

- 能力大大增强：AI能帮你做很多原来做不了的事（查天气、查快递、算数学等）。
- 自动化高，用户体验好：你一句话，AI自动处理，过程你不用操心。
- 灵活、易扩展：只要开发者加新工具，AI就能学会用。
- 安全可控：开发者可以规定AI只能用哪些工具，怎么用。

##### 3.3.2 Function Calling缺点

- 平台绑定问题：每个AI平台都有自己的Function Calling格式和标准，就像每个手机厂商都有自己的充电接口。
- 标准不统一：OpenAI有一套标准，百炼有一套标准，Claude又有一套标准，开发者需要适配多套接口。
- 跨平台困难：为不同平台开发工具时，需要写多套代码来适配不同的调用格式。
- 依赖工具质量：工具本身如果出问题，AI也会办砸。

于是，为了解决Function Calling的标准化问题，MCP出现了！

### 4、MCP是什么？

MCP的全称是Model Context Protocol（大模型上下文协议），它是一种统一的协议标准，让AI模型能够以一致的方式连接各种数据源和工具。

#### 4.1 MCP的由来

虽然各个平台的Function Calling都很好用，但有个大问题：标准不统一！

就像以前每个手机厂商都有自己的充电接口：

- 苹果用Lightning接口
- 安卓用Micro-USB或USB-C
- 其他厂商又有自己的接口

这导致：

- 用户需要准备多根充电线
- 配件厂商需要生产多种规格
- 很不方便！

AI工具调用也是一样的问题：

- OpenAI有自己的Function Calling格式
- 百炼有自己的插件系统
- Claude有自己的工具调用方式

所以，Anthropic公司提出了MCP协议，就像制定了一个"USB充电标准"，让所有AI平台都能用同一套工具调用协议。

#### 4.2 MCP生活化例子

比如你开发了一个"天气查询工具"：

**没有MCP之前：**

- 要为OpenAI写一套接口代码
- 要为百炼写一套接口代码
- 要为Claude写一套接口代码
- 每个平台的格式都不一样，很麻烦！

**有了MCP之后：**

- 只需要按MCP标准写一套代码
- 所有支持MCP的AI平台都能直接使用
- 就像一根USB线能给所有支持的设备充电一样方便！

#### 4.3 Function Calling和MCP的区别

| 特性 | Function Calling | MCP协议 |
|------|------------------|---------|
| 本质 | 各平台的专有工具调用接口 | 标准化的工具调用协议 |
| 平台性 | 平台绑定（每个平台不同） | 跨平台统一标准 |
| 多工具能力 | ✅ 支持多工具调用 | ✅ 支持多工具调用 |
| 标准化程度 | 各平台标准不统一 | 统一协议标准 |
| 开发复杂度 | 需要适配多个平台 | 一套代码适配所有平台 |
| 主要优势 | 简单易用，平台集成度高 | 跨平台兼容，标准化程度高 |

**总结一句话：**
Function Calling让AI学会了"打电话找人帮忙"，但每个AI平台的"电话格式"都不一样。MCP则制定了一个"通用电话标准"，让所有AI平台都能用同一套"拨号方式"来找工具帮忙，更加标准化和通用。

那么接下来让我们在实战中感受这二者的区别吧~

## 二、MCP的应用

现在我们已经了解完了MCP的概念，现在让我们在阿里云百炼平台来更深切的感受吧~

我们以阿里云百炼平台的插件和MCP来对比~

我们先看MCP的效果~

比如现在我想要大模型告诉我从福州去上海徐汇区的距离，以及规划方案，以及上海徐汇区的周边的信息，吃穿住行的信息，只要加入高德地图的Amap Maps的MCP服务，就可以完成下面的效果~

![MCP效果演示图1](.//img/01.png)

可以看出大模型自动调用了6个工具！

但我们只添加了一个MCP服务哦，因为高德地图的Amap Maps的MCP服务包含了多个工具！

![MCP工具调用展示](images/mcp-tools-demo.png)

但是如果是阿里云百炼平台的插件呢，可能就麻烦了许多，不仅要去找到对应的地图插件工具，还不一定保证插件与插件之间的结果能够互相调用。

我们以天气查询为例，我们要先在阿里云百炼平台添加插件：

![添加插件步骤](images/add-plugin-step.png)

然后我们进行对话看看效果~

![插件对话效果](images/plugin-chat-demo.png)

可以看出，如果我们添加多个插件工具，也是能实现MCP类似的效果，但是这二者的区别在哪呢？

MCP更厉害的地方在于，如果我想去别的平台调用同样的高德地图的Amap Maps的MCP服务也是可以的哦，但阿里云百炼平台的插件离开了阿里云百炼平台就可能需要重新配置并进行兼容，但MCP服务则不需要。之后我们会在进阶教程中去介绍到如何开发MCP。

接下来我们先回到如何来开通阿里云百炼~

### Step1：开通阿里云百炼、以及需要的MCP服务

**开通阿里云百炼**（[点击跳转](https://bailian.console.aliyun.com/)）

链接：https://bailian.console.aliyun.com/

![阿里云百炼开通页面](images/bailian-homepage.png)

**查找MCP Server**

在MCP市场找到对应的MCP Server，开通你所需要的MCP服务~

每个服务开通的规则都不同，大家可以根据自己的需求挑选合适的MCP服务。

1. 跳转MCP市场

![MCP市场页面](images/mcp-market.png)

2. 查看开通方法

![MCP服务开通方法](images/mcp-service-setup.png)

3. 点击【立即开通】

![立即开通按钮](images/mcp-activate-button.png)

### Step2：构建Agent智能体

我们先创建智能体应用，选择左边第一个~

![创建智能体应用](images/create-agent-app.png)

然后设置你想要的模型、配置你的选择MCP服务~

![配置模型和MCP服务](images/config-model-mcp.png)

之后设置智能体的提示词~

![设置智能体提示词](images/set-agent-prompt.png)

最后就可以测试效果和调试提示词了！

![测试和调试界面](images/test-debug-interface.png)

### Step3：发布应用！

![发布应用](images/publish-app.png)

至此，我们便完成了一个MCP应用开发！

## 参考链接

https://www.datawhale.cn/activity/227/39/168?rankingPage=1